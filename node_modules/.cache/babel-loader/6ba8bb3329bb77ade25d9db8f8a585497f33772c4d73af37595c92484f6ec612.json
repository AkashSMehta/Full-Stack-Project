{"ast":null,"code":"import _regeneratorRuntime from\"C:/Website/Full-Stack-Project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Website/Full-Stack-Project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Website/Full-Stack-Project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect,useRef}from'react';import api from'../../api/axiosConfig';import{useParams}from'react-router-dom';import{Container,Row,Col}from'react-bootstrap';import ReviewForm from'../reviewForm/ReviewForm';import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Reviews=function Reviews(_ref){var getMovieData=_ref.getMovieData,movie=_ref.movie,reviews=_ref.reviews,setReviews=_ref.setReviews;var revText=useRef();var params=useParams();var movieId=params.movieId;useEffect(function(){getMovieData(movieId);},[]);var addReview=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var rev,response,updatedReviews;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();rev=revText.current;_context.prev=2;_context.next=5;return api.post(\"/api/v1/reviews\",{reviewBody:rev.value,imdbId:movieId});case 5:response=_context.sent;updatedReviews=reviews!=null?[].concat(_toConsumableArray(reviews),[{body:rev.value}]):[{body:rev.value}];rev.value=\"\";setReviews(updatedReviews);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function addReview(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Reviews\"})})}),/*#__PURE__*/_jsxs(Row,{className:\"mt-2\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"img\",{src:movie===null||movie===void 0?void 0:movie.poster,alt:\"\"})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ReviewForm,{handleSubmit:addReview,revText:revText,labelText:\"Write a Review?\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"hr\",{})})})]}),reviews===null||reviews===void 0?void 0:reviews.map(function(r){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:r.body})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"hr\",{})})})]});})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"hr\",{})})})]});};export default Reviews;","map":{"version":3,"names":["useEffect","useRef","api","useParams","Container","Row","Col","ReviewForm","React","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Reviews","_ref","getMovieData","movie","reviews","setReviews","revText","params","movieId","addReview","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","rev","response","updatedReviews","wrap","_callee$","_context","prev","next","preventDefault","current","post","reviewBody","value","imdbId","sent","concat","_toConsumableArray","body","t0","console","error","stop","_x","apply","arguments","children","className","src","poster","alt","handleSubmit","labelText","map","r"],"sources":["C:/Website/Full-Stack-Project/src/components/reviews/Reviews.js"],"sourcesContent":["import {useEffect, useRef} from 'react';\r\nimport api from '../../api/axiosConfig';\r\nimport {useParams} from 'react-router-dom';\r\nimport {Container, Row, Col} from 'react-bootstrap';\r\nimport ReviewForm from '../reviewForm/ReviewForm';\r\n\r\nimport React from 'react'\r\n\r\nconst Reviews = ({getMovieData,movie,reviews,setReviews}) => {\r\n\r\n    const revText = useRef();\r\n    let params = useParams();\r\n    const movieId = params.movieId;\r\n\r\n    useEffect(()=>{\r\n        getMovieData(movieId);\r\n    },[])\r\n\r\n    const addReview = async (e) =>{\r\n        e.preventDefault();\r\n\r\n        const rev = revText.current;\r\n\r\n        try\r\n        {\r\n            const response = await api.post(\"/api/v1/reviews\",{reviewBody:rev.value,imdbId:movieId});\r\n\r\n            const updatedReviews = reviews!=null ?[...reviews, {body:rev.value}] : [{body:rev.value}];\r\n    \r\n            rev.value = \"\";\r\n    \r\n            setReviews(updatedReviews);\r\n        }\r\n        catch(err)\r\n        {\r\n            console.error(err);\r\n        }\r\n        \r\n\r\n\r\n\r\n    }\r\n\r\n  return (\r\n    <Container>\r\n        <Row>\r\n            <Col><h3>Reviews</h3></Col>\r\n        </Row>\r\n        <Row className=\"mt-2\">\r\n            <Col>\r\n                <img src={movie?.poster} alt=\"\" />\r\n            </Col>\r\n            <Col>\r\n                {\r\n                    <>\r\n                        <Row>\r\n                            <Col>\r\n                                <ReviewForm handleSubmit={addReview} revText={revText} labelText = \"Write a Review?\" />  \r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <hr />\r\n                            </Col>\r\n                        </Row>\r\n                    </>\r\n                }\r\n                {\r\n                    reviews?.map((r) => {\r\n                        return(\r\n                            <>\r\n                                <Row>\r\n                                    <Col>{r.body}</Col>\r\n                                </Row>\r\n                                <Row>\r\n                                    <Col>\r\n                                        <hr />\r\n                                    </Col>\r\n                                </Row>                                \r\n                            </>\r\n                        )\r\n                    })\r\n                }\r\n            </Col>\r\n        </Row>\r\n        <Row>\r\n            <Col>\r\n                <hr />\r\n            </Col>\r\n        </Row>        \r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Reviews"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}